{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tilak Gupta\\\\OneDrive\\\\Desktop\\\\IntervueSense\\\\Frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Camera, AlertCircle, Sparkles, Users, Smile } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EmotionDetectionApp() {\n  _s();\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [emotionData, setEmotionData] = useState(null);\n  const [error, setError] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [apiStatus, setApiStatus] = useState('checking');\n  const [videoReady, setVideoReady] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const intervalRef = useRef(null);\n\n  // Emotion colors\n  const emotionColors = {\n    happy: '#10B981',\n    sad: '#3B82F6',\n    angry: '#EF4444',\n    surprise: '#F59E0B',\n    fear: '#8B5CF6',\n    disgust: '#06B6D4',\n    neutral: '#9CA3AF'\n  };\n\n  // Check API health on mount\n  useEffect(() => {\n    checkApiHealth();\n    return () => {\n      stopWebcam();\n    };\n  }, []);\n  const checkApiHealth = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/health');\n      if (response.ok) {\n        setApiStatus('connected');\n      } else {\n        setApiStatus('error');\n      }\n    } catch (err) {\n      setApiStatus('error');\n      setError('Cannot connect to backend API. Make sure Flask server is running on port 5000.');\n    }\n  };\n  const startWebcam = async () => {\n    try {\n      setError(null);\n      setVideoReady(false);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 640\n          },\n          height: {\n            ideal: 480\n          },\n          facingMode: 'user'\n        }\n      });\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n        streamRef.current = stream;\n\n        // Wait for video to be ready\n        videoRef.current.onloadedmetadata = () => {\n          videoRef.current.play().then(() => {\n            setIsStreaming(true);\n            setVideoReady(true);\n            // Start analyzing frames after a short delay\n            setTimeout(() => {\n              intervalRef.current = setInterval(captureAndAnalyze, 1500);\n            }, 1000);\n          }).catch(err => {\n            console.error('Video play error:', err);\n            setError('Failed to start video playback');\n          });\n        };\n      }\n    } catch (err) {\n      setError('Failed to access webcam. Please grant camera permissions and try again.');\n      console.error('Webcam error:', err);\n      stopWebcam();\n    }\n  };\n  const stopWebcam = () => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n    setIsStreaming(false);\n    setVideoReady(false);\n    setEmotionData(null);\n  };\n  const captureAndAnalyze = async () => {\n    if (!videoRef.current || !canvasRef.current || isAnalyzing || !videoReady) return;\n\n    // Check if video is actually playing\n    if (videoRef.current.readyState !== 4) return;\n    setIsAnalyzing(true);\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      const context = canvas.getContext('2d');\n      canvas.width = video.videoWidth || 640;\n      canvas.height = video.videoHeight || 480;\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\n      const imageData = canvas.toDataURL('image/jpeg', 0.8);\n      const response = await fetch('http://localhost:5000/api/analyze-emotion', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          image: imageData\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        setEmotionData(data);\n        setError(null);\n      } else {\n        setError(data.error || 'Failed to analyze emotion');\n      }\n    } catch (err) {\n      console.error('API error:', err);\n      // Don't show error for every failed frame\n      if (!emotionData) {\n        setError('Failed to connect to API');\n      }\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n  const dominantColor = emotionData !== null && emotionData !== void 0 && emotionData.dominant_emotion ? emotionColors[emotionData.dominant_emotion.toLowerCase()] || '#9CA3AF' : '#9CA3AF';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-3 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n            className: \"w-8 h-8 text-yellow-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-4xl font-bold\",\n            children: \"Emotion Detection System\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Sparkles, {\n            className: \"w-8 h-8 text-yellow-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-300\",\n          children: \"Real-time facial emotion recognition using AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 flex items-center justify-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-3 h-3 rounded-full ${apiStatus === 'connected' ? 'bg-green-500' : apiStatus === 'error' ? 'bg-red-500' : 'bg-yellow-500'} animate-pulse`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm\",\n          children: apiStatus === 'connected' ? 'Connected to API' : apiStatus === 'error' ? 'API Disconnected' : 'Checking API...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative aspect-video bg-gray-900 rounded-lg overflow-hidden mb-4\",\n              children: !isStreaming ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 flex flex-col items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-20 h-20 text-gray-500 mb-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-400\",\n                  children: \"Click Start to begin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                  ref: videoRef,\n                  autoPlay: true,\n                  playsInline: true,\n                  muted: true,\n                  className: \"w-full h-full object-cover\",\n                  style: {\n                    transform: 'scaleX(-1)'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 21\n                }, this), !videoReady && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute inset-0 flex items-center justify-center bg-black/50\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-white\",\n                      children: \"Loading camera...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 23\n                }, this), emotionData && emotionData.faces && emotionData.faces.map((face, idx) => {\n                  var _videoRef$current, _videoRef$current2;\n                  const videoWidth = ((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.videoWidth) || 640;\n                  const videoHeight = ((_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.videoHeight) || 480;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute border-4 rounded transition-all duration-300\",\n                    style: {\n                      left: `${100 - (face.x + face.width) / videoWidth * 100}%`,\n                      top: `${face.y / videoHeight * 100}%`,\n                      width: `${face.width / videoWidth * 100}%`,\n                      height: `${face.height / videoHeight * 100}%`,\n                      borderColor: dominantColor,\n                      boxShadow: `0 0 20px ${dominantColor}`\n                    }\n                  }, idx, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 25\n                  }, this);\n                })]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              className: \"hidden\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: !isStreaming ? /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startWebcam,\n                disabled: apiStatus === 'error',\n                className: \"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), \"Start Webcam\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopWebcam,\n                className: \"flex-1 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 px-6 py-3 rounded-lg font-semibold transition-all\",\n                children: \"Stop Webcam\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 bg-red-500/20 border border-red-500 rounded-lg p-4 flex items-start gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-red-200\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold mb-4 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Smile, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this), \"Current Emotion\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), emotionData ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-5xl font-bold mb-2 animate-pulse\",\n                style: {\n                  color: dominantColor\n                },\n                children: emotionData.dominant_emotion.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center gap-2 text-gray-400\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [emotionData.face_count, \" face(s) detected\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-gray-400 py-8\",\n              children: [/*#__PURE__*/_jsxDEV(Smile, {\n                className: \"w-12 h-12 mx-auto mb-2 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Waiting for detection...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold mb-4\",\n              children: \"Emotion Scores\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), emotionData && emotionData.emotions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: Object.entries(emotionData.emotions).sort(([, a], [, b]) => b - a).map(([emotion, score]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"capitalize\",\n                    children: emotion\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: [score.toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full bg-gray-700 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all duration-500\",\n                    style: {\n                      width: `${score}%`,\n                      backgroundColor: emotionColors[emotion] || '#9CA3AF'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 25\n                }, this)]\n              }, emotion, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-gray-400 py-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 mx-auto mb-2 border-4 border-gray-600 border-t-gray-400 rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"Start webcam to see scores\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 bg-black/20 backdrop-blur-sm rounded-2xl p-6 border border-white/10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-3\",\n          children: \"Instructions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-disc list-inside space-y-2 text-gray-300 text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Make sure the Flask backend is running on http://localhost:5000\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Click \\\"Start Webcam\\\" and allow camera permissions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Face the camera directly for best results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Emotions are analyzed every 1.5 seconds\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Multiple faces can be detected simultaneously\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n_s(EmotionDetectionApp, \"6fbf68HqIz32/evGn+D+SZB10WE=\");\n_c = EmotionDetectionApp;\nvar _c;\n$RefreshReg$(_c, \"EmotionDetectionApp\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Camera","AlertCircle","Sparkles","Users","Smile","jsxDEV","_jsxDEV","Fragment","_Fragment","EmotionDetectionApp","_s","isStreaming","setIsStreaming","emotionData","setEmotionData","error","setError","isAnalyzing","setIsAnalyzing","apiStatus","setApiStatus","videoReady","setVideoReady","videoRef","canvasRef","streamRef","intervalRef","emotionColors","happy","sad","angry","surprise","fear","disgust","neutral","checkApiHealth","stopWebcam","response","fetch","ok","err","startWebcam","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","current","srcObject","onloadedmetadata","play","then","setTimeout","setInterval","captureAndAnalyze","catch","console","getTracks","forEach","track","stop","clearInterval","readyState","canvas","context","getContext","videoWidth","videoHeight","drawImage","imageData","toDataURL","method","headers","body","JSON","stringify","image","data","json","success","dominantColor","dominant_emotion","toLowerCase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","playsInline","muted","style","transform","faces","map","face","idx","_videoRef$current","_videoRef$current2","left","x","top","y","borderColor","boxShadow","onClick","disabled","color","toUpperCase","face_count","emotions","Object","entries","sort","a","b","emotion","score","toFixed","backgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/Tilak Gupta/OneDrive/Desktop/IntervueSense/Frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Camera, AlertCircle, Sparkles, Users, Smile } from 'lucide-react';\r\n\r\nexport default function EmotionDetectionApp() {\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [emotionData, setEmotionData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [apiStatus, setApiStatus] = useState('checking');\r\n  const [videoReady, setVideoReady] = useState(false);\r\n  \r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n  const intervalRef = useRef(null);\r\n\r\n  // Emotion colors\r\n  const emotionColors = {\r\n    happy: '#10B981',\r\n    sad: '#3B82F6',\r\n    angry: '#EF4444',\r\n    surprise: '#F59E0B',\r\n    fear: '#8B5CF6',\r\n    disgust: '#06B6D4',\r\n    neutral: '#9CA3AF'\r\n  };\r\n\r\n  // Check API health on mount\r\n  useEffect(() => {\r\n    checkApiHealth();\r\n    return () => {\r\n      stopWebcam();\r\n    };\r\n  }, []);\r\n\r\n  const checkApiHealth = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/health');\r\n      if (response.ok) {\r\n        setApiStatus('connected');\r\n      } else {\r\n        setApiStatus('error');\r\n      }\r\n    } catch (err) {\r\n      setApiStatus('error');\r\n      setError('Cannot connect to backend API. Make sure Flask server is running on port 5000.');\r\n    }\r\n  };\r\n\r\n  const startWebcam = async () => {\r\n    try {\r\n      setError(null);\r\n      setVideoReady(false);\r\n      \r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          width: { ideal: 640 },\r\n          height: { ideal: 480 },\r\n          facingMode: 'user'\r\n        } \r\n      });\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n        streamRef.current = stream;\r\n        \r\n        // Wait for video to be ready\r\n        videoRef.current.onloadedmetadata = () => {\r\n          videoRef.current.play().then(() => {\r\n            setIsStreaming(true);\r\n            setVideoReady(true);\r\n            // Start analyzing frames after a short delay\r\n            setTimeout(() => {\r\n              intervalRef.current = setInterval(captureAndAnalyze, 1500);\r\n            }, 1000);\r\n          }).catch(err => {\r\n            console.error('Video play error:', err);\r\n            setError('Failed to start video playback');\r\n          });\r\n        };\r\n      }\r\n    } catch (err) {\r\n      setError('Failed to access webcam. Please grant camera permissions and try again.');\r\n      console.error('Webcam error:', err);\r\n      stopWebcam();\r\n    }\r\n  };\r\n\r\n  const stopWebcam = () => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    \r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    \r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n    \r\n    setIsStreaming(false);\r\n    setVideoReady(false);\r\n    setEmotionData(null);\r\n  };\r\n\r\n  const captureAndAnalyze = async () => {\r\n    if (!videoRef.current || !canvasRef.current || isAnalyzing || !videoReady) return;\r\n    \r\n    // Check if video is actually playing\r\n    if (videoRef.current.readyState !== 4) return;\r\n    \r\n    setIsAnalyzing(true);\r\n    \r\n    try {\r\n      const video = videoRef.current;\r\n      const canvas = canvasRef.current;\r\n      const context = canvas.getContext('2d');\r\n      \r\n      canvas.width = video.videoWidth || 640;\r\n      canvas.height = video.videoHeight || 480;\r\n      \r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      \r\n      const imageData = canvas.toDataURL('image/jpeg', 0.8);\r\n      \r\n      const response = await fetch('http://localhost:5000/api/analyze-emotion', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ image: imageData }),\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setEmotionData(data);\r\n        setError(null);\r\n      } else {\r\n        setError(data.error || 'Failed to analyze emotion');\r\n      }\r\n    } catch (err) {\r\n      console.error('API error:', err);\r\n      // Don't show error for every failed frame\r\n      if (!emotionData) {\r\n        setError('Failed to connect to API');\r\n      }\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  };\r\n\r\n  const dominantColor = emotionData?.dominant_emotion \r\n    ? emotionColors[emotionData.dominant_emotion.toLowerCase()] || '#9CA3AF'\r\n    : '#9CA3AF';\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white p-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"text-center mb-8\">\r\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\r\n            <Sparkles className=\"w-8 h-8 text-yellow-400\" />\r\n            <h1 className=\"text-4xl font-bold\">Emotion Detection System</h1>\r\n            <Sparkles className=\"w-8 h-8 text-yellow-400\" />\r\n          </div>\r\n          <p className=\"text-gray-300\">Real-time facial emotion recognition using AI</p>\r\n        </div>\r\n\r\n        {/* API Status */}\r\n        <div className=\"mb-6 flex items-center justify-center gap-2\">\r\n          <div className={`w-3 h-3 rounded-full ${\r\n            apiStatus === 'connected' ? 'bg-green-500' : \r\n            apiStatus === 'error' ? 'bg-red-500' : \r\n            'bg-yellow-500'\r\n          } animate-pulse`}></div>\r\n          <span className=\"text-sm\">\r\n            {apiStatus === 'connected' ? 'Connected to API' : \r\n             apiStatus === 'error' ? 'API Disconnected' : \r\n             'Checking API...'}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Main Content Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n          {/* Video Section */}\r\n          <div className=\"lg:col-span-2\">\r\n            <div className=\"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\">\r\n              <div className=\"relative aspect-video bg-gray-900 rounded-lg overflow-hidden mb-4\">\r\n                {!isStreaming ? (\r\n                  <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\r\n                    <Camera className=\"w-20 h-20 text-gray-500 mb-4\" />\r\n                    <p className=\"text-gray-400\">Click Start to begin</p>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <video\r\n                      ref={videoRef}\r\n                      autoPlay\r\n                      playsInline\r\n                      muted\r\n                      className=\"w-full h-full object-cover\"\r\n                      style={{ transform: 'scaleX(-1)' }}\r\n                    />\r\n                    {!videoReady && (\r\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\r\n                        <div className=\"text-center\">\r\n                          <div className=\"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-3\"></div>\r\n                          <p className=\"text-white\">Loading camera...</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    {emotionData && emotionData.faces && emotionData.faces.map((face, idx) => {\r\n                      const videoWidth = videoRef.current?.videoWidth || 640;\r\n                      const videoHeight = videoRef.current?.videoHeight || 480;\r\n                      return (\r\n                        <div\r\n                          key={idx}\r\n                          className=\"absolute border-4 rounded transition-all duration-300\"\r\n                          style={{\r\n                            left: `${100 - ((face.x + face.width) / videoWidth) * 100}%`,\r\n                            top: `${(face.y / videoHeight) * 100}%`,\r\n                            width: `${(face.width / videoWidth) * 100}%`,\r\n                            height: `${(face.height / videoHeight) * 100}%`,\r\n                            borderColor: dominantColor,\r\n                            boxShadow: `0 0 20px ${dominantColor}`,\r\n                          }}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </>\r\n                )}\r\n              </div>\r\n              \r\n              <canvas ref={canvasRef} className=\"hidden\" />\r\n              \r\n              <div className=\"flex gap-3\">\r\n                {!isStreaming ? (\r\n                  <button\r\n                    onClick={startWebcam}\r\n                    disabled={apiStatus === 'error'}\r\n                    className=\"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all\"\r\n                  >\r\n                    <Camera className=\"w-5 h-5\" />\r\n                    Start Webcam\r\n                  </button>\r\n                ) : (\r\n                  <button\r\n                    onClick={stopWebcam}\r\n                    className=\"flex-1 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 px-6 py-3 rounded-lg font-semibold transition-all\"\r\n                  >\r\n                    Stop Webcam\r\n                  </button>\r\n                )}\r\n              </div>\r\n\r\n              {error && (\r\n                <div className=\"mt-4 bg-red-500/20 border border-red-500 rounded-lg p-4 flex items-start gap-3\">\r\n                  <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\r\n                  <p className=\"text-sm text-red-200\">{error}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Results Section */}\r\n          <div className=\"space-y-6\">\r\n            {/* Dominant Emotion Card */}\r\n            <div className=\"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\">\r\n              <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\r\n                <Smile className=\"w-6 h-6\" />\r\n                Current Emotion\r\n              </h3>\r\n              \r\n              {emotionData ? (\r\n                <div className=\"text-center\">\r\n                  <div \r\n                    className=\"text-5xl font-bold mb-2 animate-pulse\"\r\n                    style={{ color: dominantColor }}\r\n                  >\r\n                    {emotionData.dominant_emotion.toUpperCase()}\r\n                  </div>\r\n                  <div className=\"flex items-center justify-center gap-2 text-gray-400\">\r\n                    <Users className=\"w-4 h-4\" />\r\n                    <span>{emotionData.face_count} face(s) detected</span>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center text-gray-400 py-8\">\r\n                  <Smile className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\r\n                  <p>Waiting for detection...</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* All Emotions Card */}\r\n            <div className=\"bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-white/10\">\r\n              <h3 className=\"text-xl font-semibold mb-4\">Emotion Scores</h3>\r\n              \r\n              {emotionData && emotionData.emotions ? (\r\n                <div className=\"space-y-3\">\r\n                  {Object.entries(emotionData.emotions)\r\n                    .sort(([, a], [, b]) => b - a)\r\n                    .map(([emotion, score]) => (\r\n                      <div key={emotion}>\r\n                        <div className=\"flex justify-between text-sm mb-1\">\r\n                          <span className=\"capitalize\">{emotion}</span>\r\n                          <span className=\"font-semibold\">{score.toFixed(1)}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-700 rounded-full h-2\">\r\n                          <div\r\n                            className=\"h-2 rounded-full transition-all duration-500\"\r\n                            style={{\r\n                              width: `${score}%`,\r\n                              backgroundColor: emotionColors[emotion] || '#9CA3AF'\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center text-gray-400 py-8\">\r\n                  <div className=\"w-12 h-12 mx-auto mb-2 border-4 border-gray-600 border-t-gray-400 rounded-full animate-spin\"></div>\r\n                  <p className=\"text-sm\">Start webcam to see scores</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Instructions */}\r\n        <div className=\"mt-8 bg-black/20 backdrop-blur-sm rounded-2xl p-6 border border-white/10\">\r\n          <h3 className=\"font-semibold mb-3\">Instructions:</h3>\r\n          <ul className=\"list-disc list-inside space-y-2 text-gray-300 text-sm\">\r\n            <li>Make sure the Flask backend is running on http://localhost:5000</li>\r\n            <li>Click \"Start Webcam\" and allow camera permissions</li>\r\n            <li>Face the camera directly for best results</li>\r\n            <li>Emotions are analyzed every 1.5 seconds</li>\r\n            <li>Multiple faces can be detected simultaneously</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}