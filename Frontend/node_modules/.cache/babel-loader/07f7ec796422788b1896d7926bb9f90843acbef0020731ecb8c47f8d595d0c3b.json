{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tilak Gupta\\\\IntervueSense\\\\Frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Camera, Activity, Brain, TrendingUp, AlertCircle, CheckCircle, BarChart3, VideoOff, Sparkles } from 'lucide-react';\nimport { LineChart, Line, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function VirtueSenseDashboard() {\n  _s();\n  var _displayData$faces;\n  // Session state\n  const [isSessionActive, setIsSessionActive] = useState(false);\n  const [sessionTime, setSessionTime] = useState(0);\n\n  // Real-time emotion data (from your implementation)\n  const [emotionData, setEmotionData] = useState(null);\n  const [smoothedEmotions, setSmoothedEmotions] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [apiStatus, setApiStatus] = useState('checking');\n  const [lastAnalysisTime, setLastAnalysisTime] = useState(null);\n  const [analysisCount, setAnalysisCount] = useState(0);\n\n  // Webcam state\n  const [webcamActive, setWebcamActive] = useState(false);\n  const [webcamError, setWebcamError] = useState('');\n\n  // Analytics state (from friend's implementation)\n  const [emotionHistory, setEmotionHistory] = useState([]);\n  const [emotionDistribution, setEmotionDistribution] = useState([{\n    name: 'Happy',\n    value: 0,\n    color: '#10b981'\n  }, {\n    name: 'Neutral',\n    value: 0,\n    color: '#6b7280'\n  }, {\n    name: 'Sad',\n    value: 0,\n    color: '#3b82f6'\n  }, {\n    name: 'Angry',\n    value: 0,\n    color: '#ef4444'\n  }, {\n    name: 'Surprise',\n    value: 0,\n    color: '#f59e0b'\n  }, {\n    name: 'Fear',\n    value: 0,\n    color: '#8b5cf6'\n  }, {\n    name: 'Disgust',\n    value: 0,\n    color: '#06B6D4'\n  }]);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const streamRef = useRef(null);\n  const emotionHistoryRef = useRef([]);\n  const emotionColors = {\n    happy: '#10B981',\n    sad: '#3B82F6',\n    angry: '#EF4444',\n    surprise: '#F59E0B',\n    fear: '#8B5CF6',\n    disgust: '#06B6D4',\n    neutral: '#9CA3AF'\n  };\n\n  // Stop webcam function\n  const stopWebcam = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop());\n      streamRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null;\n    }\n    emotionHistoryRef.current = [];\n    setWebcamActive(false);\n  }, []);\n\n  // Check API health on mount\n  useEffect(() => {\n    const checkApiHealth = async () => {\n      try {\n        const response = await fetch('/api/health', {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          await response.json();\n          setApiStatus('connected');\n        } else {\n          setApiStatus('error');\n        }\n      } catch (err) {\n        setApiStatus('error');\n        setWebcamError('Cannot connect to backend API. Make sure Flask server is running on port 5000.');\n      }\n    };\n    checkApiHealth();\n    return () => stopWebcam();\n  }, [stopWebcam]);\n\n  // Start webcam\n  const startWebcam = async () => {\n    try {\n      setWebcamError('');\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          },\n          facingMode: 'user'\n        },\n        audio: false\n      });\n      streamRef.current = stream;\n      setWebcamActive(true);\n      setTimeout(() => {\n        if (videoRef.current && streamRef.current) {\n          videoRef.current.srcObject = streamRef.current;\n          videoRef.current.onloadedmetadata = () => {\n            videoRef.current.play().catch(err => {\n              console.error('Error playing video:', err);\n            });\n          };\n        }\n      }, 100);\n    } catch (err) {\n      console.error('Error accessing webcam:', err);\n      setWebcamError('Failed to access webcam. Please allow camera permissions.');\n      setWebcamActive(false);\n    }\n  };\n\n  // Apply stream when video element becomes available\n  useEffect(() => {\n    if (webcamActive && videoRef.current && streamRef.current) {\n      videoRef.current.srcObject = streamRef.current;\n      videoRef.current.play().catch(err => {\n        console.error('Error playing video:', err);\n      });\n    }\n  }, [webcamActive]);\n\n  // Smooth emotions with 5-frame averaging\n  const smoothEmotions = newEmotions => {\n    const historyLength = 5;\n    emotionHistoryRef.current.push(newEmotions);\n    if (emotionHistoryRef.current.length > historyLength) {\n      emotionHistoryRef.current.shift();\n    }\n    const averaged = {};\n    const emotionKeys = Object.keys(newEmotions);\n    emotionKeys.forEach(emotion => {\n      const sum = emotionHistoryRef.current.reduce((acc, curr) => acc + (curr[emotion] || 0), 0);\n      averaged[emotion] = sum / emotionHistoryRef.current.length;\n    });\n    return averaged;\n  };\n\n  // Real API emotion analysis\n  const captureAndAnalyze = useCallback(async () => {\n    if (!videoRef.current || !canvasRef.current) return;\n    if (!streamRef.current) return;\n    if (isAnalyzing) return;\n    if (videoRef.current.readyState !== 4) return;\n    setIsAnalyzing(true);\n    const startTime = Date.now();\n    const currentCount = analysisCount + 1;\n    setAnalysisCount(currentCount);\n    try {\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      const context = canvas.getContext('2d');\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\n      const imageData = canvas.toDataURL('image/jpeg', 0.95);\n      const response = await fetch('/api/analyze-emotion', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          image: imageData\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      const data = await response.json();\n      const analysisTime = Date.now() - startTime;\n      if (data.success) {\n        setEmotionData(data);\n        const smoothed = smoothEmotions(data.emotions);\n        const dominantEmotion = Object.entries(smoothed).reduce((a, b) => smoothed[a[0]] > smoothed[b[0]] ? a : b)[0];\n        setSmoothedEmotions({\n          emotions: smoothed,\n          dominant_emotion: dominantEmotion,\n          face_count: data.face_count,\n          faces: data.faces\n        });\n        setWebcamError('');\n        setLastAnalysisTime(analysisTime);\n      } else {\n        if (!emotionData) {\n          setWebcamError(data.error || 'No face detected');\n        }\n      }\n    } catch (err) {\n      if (!emotionData) {\n        setWebcamError('API error: ' + err.message);\n      }\n    } finally {\n      setIsAnalyzing(false);\n    }\n  }, [isAnalyzing, analysisCount, emotionData]);\n\n  // Session timer\n  useEffect(() => {\n    if (!isSessionActive) return;\n    const interval = setInterval(() => {\n      setSessionTime(prev => prev + 1);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [isSessionActive]);\n\n  // Continuous analysis during session\n  useEffect(() => {\n    if (!isSessionActive || !webcamActive) return;\n    const runAnalysis = async () => {\n      while (isSessionActive && streamRef.current) {\n        await captureAndAnalyze();\n        await new Promise(resolve => setTimeout(resolve, 500));\n      }\n    };\n\n    // Wait for video to be ready\n    const timeout = setTimeout(() => {\n      var _videoRef$current;\n      if (((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.readyState) === 4) {\n        runAnalysis();\n      }\n    }, 1500);\n    return () => clearTimeout(timeout);\n  }, [isSessionActive, webcamActive, captureAndAnalyze]);\n\n  // Calculate metrics function\n  const calculateMetrics = useCallback(() => {\n    if (!(smoothedEmotions !== null && smoothedEmotions !== void 0 && smoothedEmotions.emotions)) return {\n      confidence: 0,\n      attentiveness: 0,\n      nervousness: 0\n    };\n    const e = smoothedEmotions.emotions;\n    const positive = (e.happy || 0) + (e.neutral || 0) * 0.5;\n    const negative = (e.fear || 0) + (e.sad || 0) + (e.angry || 0) + (e.disgust || 0);\n    const confidence = Math.max(0, Math.min(100, positive - negative * 0.5));\n    const attentiveness = Math.max(0, Math.min(100, ((e.neutral || 0) + (e.happy || 0) * 0.8) * 0.9));\n    const nervousness = Math.max(0, Math.min(100, negative * 0.6 + (e.fear || 0) * 0.4));\n    return {\n      confidence,\n      attentiveness,\n      nervousness\n    };\n  }, [smoothedEmotions]);\n\n  // Update analytics when emotion changes\n  useEffect(() => {\n    if (!isSessionActive || !smoothedEmotions) return;\n    const displayData = smoothedEmotions;\n    const metrics = calculateMetrics();\n\n    // Update emotion history for charts\n    setEmotionHistory(prev => {\n      const newHistory = [...prev, {\n        time: sessionTime,\n        confidence: metrics.confidence,\n        attentiveness: metrics.attentiveness,\n        nervousness: metrics.nervousness\n      }];\n      return newHistory.slice(-30);\n    });\n\n    // Update emotion distribution\n    setEmotionDistribution(prev => {\n      const updated = prev.map(item => {\n        const emotionKey = item.name.toLowerCase();\n        if (displayData.dominant_emotion.toLowerCase() === emotionKey) {\n          return {\n            ...item,\n            value: item.value + 1\n          };\n        }\n        return item;\n      });\n      return updated;\n    });\n  }, [smoothedEmotions, sessionTime, isSessionActive, calculateMetrics]);\n  const startSession = async () => {\n    setIsSessionActive(true);\n    setSessionTime(0);\n    setAnalysisCount(0);\n    setEmotionHistory([]);\n    setEmotionData(null);\n    setSmoothedEmotions(null);\n    emotionHistoryRef.current = [];\n    setEmotionDistribution([{\n      name: 'Happy',\n      value: 0,\n      color: '#10b981'\n    }, {\n      name: 'Neutral',\n      value: 0,\n      color: '#6b7280'\n    }, {\n      name: 'Sad',\n      value: 0,\n      color: '#3b82f6'\n    }, {\n      name: 'Angry',\n      value: 0,\n      color: '#ef4444'\n    }, {\n      name: 'Surprise',\n      value: 0,\n      color: '#f59e0b'\n    }, {\n      name: 'Fear',\n      value: 0,\n      color: '#8b5cf6'\n    }, {\n      name: 'Disgust',\n      value: 0,\n      color: '#06B6D4'\n    }]);\n    await startWebcam();\n  };\n  const stopSession = () => {\n    setIsSessionActive(false);\n    stopWebcam();\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  const displayData = smoothedEmotions || emotionData;\n  const dominantColor = displayData !== null && displayData !== void 0 && displayData.dominant_emotion ? emotionColors[displayData.dominant_emotion.toLowerCase()] || '#9CA3AF' : '#9CA3AF';\n  const metrics = calculateMetrics();\n  const MetricCard = ({\n    title,\n    value,\n    icon: Icon,\n    color\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-md p-6 border-l-4\",\n    style: {\n      borderLeftColor: color\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-gray-600 text-sm font-medium\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Icon, {\n        className: \"text-gray-400\",\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-3xl font-bold\",\n      style: {\n        color\n      },\n      children: [value.toFixed(0), \"%\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg p-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between flex-wrap gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n                className: \"w-8 h-8 text-indigo-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-3xl font-bold text-gray-800\",\n                children: \"VirtueSense\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Real-Time Emotion Detection Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4 flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `w-3 h-3 rounded-full ${apiStatus === 'connected' ? 'bg-green-500' : apiStatus === 'error' ? 'bg-red-500' : 'bg-yellow-500'} animate-pulse`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-600\",\n                children: apiStatus === 'connected' ? 'API Connected' : apiStatus === 'error' ? 'API Error' : 'Checking...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), isSessionActive && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(Activity, {\n                className: \"w-4 h-4 text-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [analysisCount, \" analyses\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this), lastAnalysisTime && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-400\",\n                children: [\"(\", lastAnalysisTime, \"ms)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Session Time\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-2xl font-mono font-bold text-gray-800\",\n                children: formatTime(sessionTime)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), !isSessionActive ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startSession,\n              disabled: apiStatus === 'error',\n              className: \"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Activity, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this), \"Start Session\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopSession,\n              className: \"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this), \"End Session\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-900 rounded-lg shadow-lg overflow-hidden relative\",\n          style: {\n            paddingBottom: '56.25%',\n            height: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0\",\n            children: webcamActive ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                ref: videoRef,\n                autoPlay: true,\n                playsInline: true,\n                muted: true,\n                className: \"w-full h-full object-cover\",\n                style: {\n                  transform: 'scaleX(-1)'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 19\n              }, this), displayData === null || displayData === void 0 ? void 0 : (_displayData$faces = displayData.faces) === null || _displayData$faces === void 0 ? void 0 : _displayData$faces.map((face, idx) => {\n                var _videoRef$current2, _videoRef$current3;\n                const videoWidth = ((_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.videoWidth) || 640;\n                const videoHeight = ((_videoRef$current3 = videoRef.current) === null || _videoRef$current3 === void 0 ? void 0 : _videoRef$current3.videoHeight) || 480;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute border-4 rounded transition-all duration-300\",\n                  style: {\n                    left: `${100 - (face.x + face.width) / videoWidth * 100}%`,\n                    top: `${face.y / videoHeight * 100}%`,\n                    width: `${face.width / videoWidth * 100}%`,\n                    height: `${face.height / videoHeight * 100}%`,\n                    borderColor: dominantColor,\n                    boxShadow: `0 0 20px ${dominantColor}`\n                  }\n                }, idx, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 23\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-4 right-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500 z-10\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 rounded-full bg-white animate-pulse\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-white text-sm font-semibold\",\n                  children: \"LIVE\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), isAnalyzing && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute top-16 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-xs z-10 animate-pulse flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-white rounded-full animate-ping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 23\n                }, this), \"Analyzing...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full h-full flex items-center justify-center p-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: webcamError ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(VideoOff, {\n                    className: \"mx-auto mb-4 text-red-400\",\n                    size: 48\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-red-400 mb-2\",\n                    children: \"Camera Access Error\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500 text-sm\",\n                    children: webcamError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 472,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Camera, {\n                    className: \"mx-auto mb-4 text-gray-500\",\n                    size: 48\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-400\",\n                    children: \"Start session to begin detection\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-700\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-3 h-3 rounded-full bg-gray-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 479,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white text-sm\",\n                      children: \"Offline\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 480,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 478,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(Brain, {\n                className: \"text-indigo-600\",\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-bold text-gray-800\",\n                children: \"Current Emotion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-6\",\n              children: displayData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-6xl font-bold mb-2 capitalize\",\n                  style: {\n                    color: dominantColor\n                  },\n                  children: displayData.dominant_emotion\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 500,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500 flex items-center justify-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Camera, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 23\n                  }, this), displayData.face_count, \" face(s) detected\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-6xl font-bold mb-2 text-gray-300\",\n                  children: \"Neutral\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-400\",\n                  children: \"Waiting for detection...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n                className: \"text-purple-600\",\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-bold text-gray-800\",\n                children: \"Emotion Scores\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this), displayData !== null && displayData !== void 0 && displayData.emotions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: Object.entries(displayData.emotions).sort(([, a], [, b]) => b - a).map(([emotion, score]) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-sm mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"capitalize font-medium\",\n                    children: emotion\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: [score.toFixed(1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 533,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-full bg-gray-200 rounded-full h-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"h-2 rounded-full transition-all duration-500\",\n                    style: {\n                      width: `${score}%`,\n                      backgroundColor: emotionColors[emotion] || '#9CA3AF'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 25\n                }, this)]\n              }, emotion, true, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-gray-400 py-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 mx-auto mb-2 border-4 border-gray-300 border-t-gray-500 rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"Start session to see scores\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n          title: \"Confidence Level\",\n          value: metrics.confidence,\n          icon: TrendingUp,\n          color: \"#10b981\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n          title: \"Attentiveness\",\n          value: metrics.attentiveness,\n          icon: CheckCircle,\n          color: \"#3b82f6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n          title: \"Nervousness\",\n          value: metrics.nervousness,\n          icon: AlertCircle,\n          color: \"#ef4444\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), emotionHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n              size: 24,\n              className: \"text-indigo-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 17\n            }, this), \"Emotional Trends\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 300,\n            children: /*#__PURE__*/_jsxDEV(LineChart, {\n              data: emotionHistory,\n              children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                strokeDasharray: \"3 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"time\",\n                label: {\n                  value: 'Time (s)',\n                  position: 'insideBottom',\n                  offset: -5\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                label: {\n                  value: 'Score',\n                  angle: -90,\n                  position: 'insideLeft'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Line, {\n                type: \"monotone\",\n                dataKey: \"confidence\",\n                stroke: \"#10b981\",\n                strokeWidth: 2,\n                name: \"Confidence\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Line, {\n                type: \"monotone\",\n                dataKey: \"attentiveness\",\n                stroke: \"#3b82f6\",\n                strokeWidth: 2,\n                name: \"Attentiveness\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Line, {\n                type: \"monotone\",\n                dataKey: \"nervousness\",\n                stroke: \"#ef4444\",\n                strokeWidth: 2,\n                name: \"Nervousness\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold text-gray-800 mb-4\",\n            children: \"Emotion Distribution\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 300,\n            children: /*#__PURE__*/_jsxDEV(PieChart, {\n              children: [/*#__PURE__*/_jsxDEV(Pie, {\n                data: emotionDistribution,\n                cx: \"50%\",\n                cy: \"50%\",\n                labelLine: false,\n                label: ({\n                  name,\n                  percent\n                }) => percent > 0 ? `${name} ${(percent * 100).toFixed(0)}%` : '',\n                outerRadius: 100,\n                fill: \"#8884d8\",\n                dataKey: \"value\",\n                children: emotionDistribution.map((entry, index) => /*#__PURE__*/_jsxDEV(Cell, {\n                  fill: entry.color\n                }, `cell-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 11\n      }, this), !isSessionActive && emotionHistory.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-bold text-gray-800 mb-4\",\n          children: \"Session Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-green-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-1\",\n              children: \"Average Confidence\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: [emotionHistory.length > 0 ? Math.round(emotionHistory.reduce((sum, item) => sum + item.confidence, 0) / emotionHistory.length) : 0, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-blue-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-1\",\n              children: \"Average Attentiveness\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-600\",\n              children: [emotionHistory.length > 0 ? Math.round(emotionHistory.reduce((sum, item) => sum + item.attentiveness, 0) / emotionHistory.length) : 0, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-red-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-1\",\n              children: \"Average Nervousness\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-red-600\",\n              children: [emotionHistory.length > 0 ? Math.round(emotionHistory.reduce((sum, item) => sum + item.nervousness, 0) / emotionHistory.length) : 0, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n}\n_s(VirtueSenseDashboard, \"7uBKslhc0nsPnzGOFJ+GdjHU5AY=\");\n_c = VirtueSenseDashboard;\nvar _c;\n$RefreshReg$(_c, \"VirtueSenseDashboard\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Camera","Activity","Brain","TrendingUp","AlertCircle","CheckCircle","BarChart3","VideoOff","Sparkles","LineChart","Line","PieChart","Pie","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","jsxDEV","_jsxDEV","Fragment","_Fragment","VirtueSenseDashboard","_s","_displayData$faces","isSessionActive","setIsSessionActive","sessionTime","setSessionTime","emotionData","setEmotionData","smoothedEmotions","setSmoothedEmotions","isAnalyzing","setIsAnalyzing","apiStatus","setApiStatus","lastAnalysisTime","setLastAnalysisTime","analysisCount","setAnalysisCount","webcamActive","setWebcamActive","webcamError","setWebcamError","emotionHistory","setEmotionHistory","emotionDistribution","setEmotionDistribution","name","value","color","videoRef","canvasRef","streamRef","emotionHistoryRef","emotionColors","happy","sad","angry","surprise","fear","disgust","neutral","stopWebcam","current","getTracks","forEach","track","stop","srcObject","checkApiHealth","response","fetch","method","headers","ok","json","err","startWebcam","stream","navigator","mediaDevices","getUserMedia","video","width","ideal","height","facingMode","audio","setTimeout","onloadedmetadata","play","catch","console","error","smoothEmotions","newEmotions","historyLength","push","length","shift","averaged","emotionKeys","Object","keys","emotion","sum","reduce","acc","curr","captureAndAnalyze","readyState","startTime","Date","now","currentCount","canvas","context","getContext","videoWidth","videoHeight","drawImage","imageData","toDataURL","body","JSON","stringify","image","Error","status","statusText","data","analysisTime","success","smoothed","emotions","dominantEmotion","entries","a","b","dominant_emotion","face_count","faces","message","interval","setInterval","prev","clearInterval","runAnalysis","Promise","resolve","timeout","_videoRef$current","clearTimeout","calculateMetrics","confidence","attentiveness","nervousness","e","positive","negative","Math","max","min","displayData","metrics","newHistory","time","slice","updated","map","item","emotionKey","toLowerCase","startSession","stopSession","formatTime","seconds","mins","floor","secs","toString","padStart","dominantColor","MetricCard","title","icon","Icon","className","style","borderLeftColor","children","fileName","_jsxFileName","lineNumber","columnNumber","size","toFixed","onClick","disabled","paddingBottom","ref","autoPlay","playsInline","muted","transform","face","idx","_videoRef$current2","_videoRef$current3","left","x","top","y","borderColor","boxShadow","sort","score","backgroundColor","strokeDasharray","dataKey","label","position","offset","angle","type","stroke","strokeWidth","cx","cy","labelLine","percent","outerRadius","fill","entry","index","round","display","_c","$RefreshReg$"],"sources":["C:/Users/Tilak Gupta/IntervueSense/Frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { Camera, Activity, Brain, TrendingUp, AlertCircle, CheckCircle, BarChart3, VideoOff, Sparkles } from 'lucide-react';\r\nimport { LineChart, Line, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\n\r\nexport default function VirtueSenseDashboard() {\r\n  // Session state\r\n  const [isSessionActive, setIsSessionActive] = useState(false);\r\n  const [sessionTime, setSessionTime] = useState(0);\r\n  \r\n  // Real-time emotion data (from your implementation)\r\n  const [emotionData, setEmotionData] = useState(null);\r\n  const [smoothedEmotions, setSmoothedEmotions] = useState(null);\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\r\n  const [apiStatus, setApiStatus] = useState('checking');\r\n  const [lastAnalysisTime, setLastAnalysisTime] = useState(null);\r\n  const [analysisCount, setAnalysisCount] = useState(0);\r\n  \r\n  // Webcam state\r\n  const [webcamActive, setWebcamActive] = useState(false);\r\n  const [webcamError, setWebcamError] = useState('');\r\n  \r\n  // Analytics state (from friend's implementation)\r\n  const [emotionHistory, setEmotionHistory] = useState([]);\r\n  const [emotionDistribution, setEmotionDistribution] = useState([\r\n    { name: 'Happy', value: 0, color: '#10b981' },\r\n    { name: 'Neutral', value: 0, color: '#6b7280' },\r\n    { name: 'Sad', value: 0, color: '#3b82f6' },\r\n    { name: 'Angry', value: 0, color: '#ef4444' },\r\n    { name: 'Surprise', value: 0, color: '#f59e0b' },\r\n    { name: 'Fear', value: 0, color: '#8b5cf6' },\r\n    { name: 'Disgust', value: 0, color: '#06B6D4' }\r\n  ]);\r\n  \r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n  const emotionHistoryRef = useRef([]);\r\n\r\n  const emotionColors = {\r\n    happy: '#10B981',\r\n    sad: '#3B82F6',\r\n    angry: '#EF4444',\r\n    surprise: '#F59E0B',\r\n    fear: '#8B5CF6',\r\n    disgust: '#06B6D4',\r\n    neutral: '#9CA3AF'\r\n  };\r\n\r\n  // Stop webcam function\r\n  const stopWebcam = useCallback(() => {\r\n    if (streamRef.current) {\r\n      streamRef.current.getTracks().forEach(track => track.stop());\r\n      streamRef.current = null;\r\n    }\r\n    if (videoRef.current) {\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    emotionHistoryRef.current = [];\r\n    setWebcamActive(false);\r\n  }, []);\r\n\r\n  // Check API health on mount\r\n  useEffect(() => {\r\n    const checkApiHealth = async () => {\r\n      try {\r\n        const response = await fetch('/api/health', {\r\n          method: 'GET',\r\n          headers: { 'Content-Type': 'application/json' },\r\n        });\r\n        \r\n        if (response.ok) {\r\n          await response.json();\r\n          setApiStatus('connected');\r\n        } else {\r\n          setApiStatus('error');\r\n        }\r\n      } catch (err) {\r\n        setApiStatus('error');\r\n        setWebcamError('Cannot connect to backend API. Make sure Flask server is running on port 5000.');\r\n      }\r\n    };\r\n\r\n    checkApiHealth();\r\n    return () => stopWebcam();\r\n  }, [stopWebcam]);\r\n\r\n  // Start webcam\r\n  const startWebcam = async () => {\r\n    try {\r\n      setWebcamError('');\r\n      \r\n      const stream = await navigator.mediaDevices.getUserMedia({ \r\n        video: { \r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 },\r\n          facingMode: 'user'\r\n        },\r\n        audio: false \r\n      });\r\n      \r\n      streamRef.current = stream;\r\n      setWebcamActive(true);\r\n      \r\n      setTimeout(() => {\r\n        if (videoRef.current && streamRef.current) {\r\n          videoRef.current.srcObject = streamRef.current;\r\n          videoRef.current.onloadedmetadata = () => {\r\n            videoRef.current.play().catch(err => {\r\n              console.error('Error playing video:', err);\r\n            });\r\n          };\r\n        }\r\n      }, 100);\r\n      \r\n    } catch (err) {\r\n      console.error('Error accessing webcam:', err);\r\n      setWebcamError('Failed to access webcam. Please allow camera permissions.');\r\n      setWebcamActive(false);\r\n    }\r\n  };\r\n\r\n  // Apply stream when video element becomes available\r\n  useEffect(() => {\r\n    if (webcamActive && videoRef.current && streamRef.current) {\r\n      videoRef.current.srcObject = streamRef.current;\r\n      videoRef.current.play().catch(err => {\r\n        console.error('Error playing video:', err);\r\n      });\r\n    }\r\n  }, [webcamActive]);\r\n\r\n  // Smooth emotions with 5-frame averaging\r\n  const smoothEmotions = (newEmotions) => {\r\n    const historyLength = 5;\r\n    emotionHistoryRef.current.push(newEmotions);\r\n    \r\n    if (emotionHistoryRef.current.length > historyLength) {\r\n      emotionHistoryRef.current.shift();\r\n    }\r\n    \r\n    const averaged = {};\r\n    const emotionKeys = Object.keys(newEmotions);\r\n    \r\n    emotionKeys.forEach(emotion => {\r\n      const sum = emotionHistoryRef.current.reduce((acc, curr) => acc + (curr[emotion] || 0), 0);\r\n      averaged[emotion] = sum / emotionHistoryRef.current.length;\r\n    });\r\n    \r\n    return averaged;\r\n  };\r\n\r\n  // Real API emotion analysis\r\n  const captureAndAnalyze = useCallback(async () => {\r\n    if (!videoRef.current || !canvasRef.current) return;\r\n    if (!streamRef.current) return;\r\n    if (isAnalyzing) return;\r\n    if (videoRef.current.readyState !== 4) return;\r\n    \r\n    setIsAnalyzing(true);\r\n    const startTime = Date.now();\r\n    const currentCount = analysisCount + 1;\r\n    setAnalysisCount(currentCount);\r\n    \r\n    try {\r\n      const video = videoRef.current;\r\n      const canvas = canvasRef.current;\r\n      const context = canvas.getContext('2d');\r\n      \r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n      \r\n      const imageData = canvas.toDataURL('image/jpeg', 0.95);\r\n      \r\n      const response = await fetch('/api/analyze-emotion', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ image: imageData }),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      const analysisTime = Date.now() - startTime;\r\n      \r\n      if (data.success) {\r\n        setEmotionData(data);\r\n        \r\n        const smoothed = smoothEmotions(data.emotions);\r\n        const dominantEmotion = Object.entries(smoothed).reduce((a, b) => \r\n          smoothed[a[0]] > smoothed[b[0]] ? a : b\r\n        )[0];\r\n        \r\n        setSmoothedEmotions({\r\n          emotions: smoothed,\r\n          dominant_emotion: dominantEmotion,\r\n          face_count: data.face_count,\r\n          faces: data.faces\r\n        });\r\n        \r\n        setWebcamError('');\r\n        setLastAnalysisTime(analysisTime);\r\n      } else {\r\n        if (!emotionData) {\r\n          setWebcamError(data.error || 'No face detected');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      if (!emotionData) {\r\n        setWebcamError('API error: ' + err.message);\r\n      }\r\n    } finally {\r\n      setIsAnalyzing(false);\r\n    }\r\n  }, [isAnalyzing, analysisCount, emotionData]);\r\n\r\n  // Session timer\r\n  useEffect(() => {\r\n    if (!isSessionActive) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setSessionTime(prev => prev + 1);\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [isSessionActive]);\r\n\r\n  // Continuous analysis during session\r\n  useEffect(() => {\r\n    if (!isSessionActive || !webcamActive) return;\r\n\r\n    const runAnalysis = async () => {\r\n      while (isSessionActive && streamRef.current) {\r\n        await captureAndAnalyze();\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n      }\r\n    };\r\n\r\n    // Wait for video to be ready\r\n    const timeout = setTimeout(() => {\r\n      if (videoRef.current?.readyState === 4) {\r\n        runAnalysis();\r\n      }\r\n    }, 1500);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [isSessionActive, webcamActive, captureAndAnalyze]);\r\n\r\n  // Calculate metrics function\r\n  const calculateMetrics = useCallback(() => {\r\n    if (!smoothedEmotions?.emotions) return { confidence: 0, attentiveness: 0, nervousness: 0 };\r\n    \r\n    const e = smoothedEmotions.emotions;\r\n    const positive = (e.happy || 0) + (e.neutral || 0) * 0.5;\r\n    const negative = (e.fear || 0) + (e.sad || 0) + (e.angry || 0) + (e.disgust || 0);\r\n    \r\n    const confidence = Math.max(0, Math.min(100, positive - (negative * 0.5)));\r\n    const attentiveness = Math.max(0, Math.min(100, ((e.neutral || 0) + (e.happy || 0) * 0.8) * 0.9));\r\n    const nervousness = Math.max(0, Math.min(100, negative * 0.6 + (e.fear || 0) * 0.4));\r\n    \r\n    return { confidence, attentiveness, nervousness };\r\n  }, [smoothedEmotions]);\r\n\r\n  // Update analytics when emotion changes\r\n  useEffect(() => {\r\n    if (!isSessionActive || !smoothedEmotions) return;\r\n\r\n    const displayData = smoothedEmotions;\r\n    const metrics = calculateMetrics();\r\n\r\n    // Update emotion history for charts\r\n    setEmotionHistory(prev => {\r\n      const newHistory = [...prev, {\r\n        time: sessionTime,\r\n        confidence: metrics.confidence,\r\n        attentiveness: metrics.attentiveness,\r\n        nervousness: metrics.nervousness\r\n      }];\r\n      return newHistory.slice(-30);\r\n    });\r\n\r\n    // Update emotion distribution\r\n    setEmotionDistribution(prev => {\r\n      const updated = prev.map(item => {\r\n        const emotionKey = item.name.toLowerCase();\r\n        if (displayData.dominant_emotion.toLowerCase() === emotionKey) {\r\n          return { ...item, value: item.value + 1 };\r\n        }\r\n        return item;\r\n      });\r\n      return updated;\r\n    });\r\n  }, [smoothedEmotions, sessionTime, isSessionActive, calculateMetrics]);\r\n\r\n  const startSession = async () => {\r\n    setIsSessionActive(true);\r\n    setSessionTime(0);\r\n    setAnalysisCount(0);\r\n    setEmotionHistory([]);\r\n    setEmotionData(null);\r\n    setSmoothedEmotions(null);\r\n    emotionHistoryRef.current = [];\r\n    setEmotionDistribution([\r\n      { name: 'Happy', value: 0, color: '#10b981' },\r\n      { name: 'Neutral', value: 0, color: '#6b7280' },\r\n      { name: 'Sad', value: 0, color: '#3b82f6' },\r\n      { name: 'Angry', value: 0, color: '#ef4444' },\r\n      { name: 'Surprise', value: 0, color: '#f59e0b' },\r\n      { name: 'Fear', value: 0, color: '#8b5cf6' },\r\n      { name: 'Disgust', value: 0, color: '#06B6D4' }\r\n    ]);\r\n    await startWebcam();\r\n  };\r\n\r\n  const stopSession = () => {\r\n    setIsSessionActive(false);\r\n    stopWebcam();\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const displayData = smoothedEmotions || emotionData;\r\n  const dominantColor = displayData?.dominant_emotion \r\n    ? emotionColors[displayData.dominant_emotion.toLowerCase()] || '#9CA3AF'\r\n    : '#9CA3AF';\r\n  const metrics = calculateMetrics();\r\n\r\n  const MetricCard = ({ title, value, icon: Icon, color }) => (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6 border-l-4\" style={{ borderLeftColor: color }}>\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <span className=\"text-gray-600 text-sm font-medium\">{title}</span>\r\n        <Icon className=\"text-gray-400\" size={20} />\r\n      </div>\r\n      <div className=\"text-3xl font-bold\" style={{ color }}>{value.toFixed(0)}%</div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6\">\r\n      {/* Header */}\r\n      <div className=\"max-w-7xl mx-auto mb-8\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n          <div className=\"flex items-center justify-between flex-wrap gap-4\">\r\n            <div>\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <Sparkles className=\"w-8 h-8 text-indigo-600\" />\r\n                <h1 className=\"text-3xl font-bold text-gray-800\">VirtueSense</h1>\r\n              </div>\r\n              <p className=\"text-gray-600\">Real-Time Emotion Detection Dashboard</p>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-4 flex-wrap\">\r\n              {/* API Status */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className={`w-3 h-3 rounded-full ${\r\n                  apiStatus === 'connected' ? 'bg-green-500' : \r\n                  apiStatus === 'error' ? 'bg-red-500' : \r\n                  'bg-yellow-500'\r\n                } animate-pulse`}></div>\r\n                <span className=\"text-sm text-gray-600\">\r\n                  {apiStatus === 'connected' ? 'API Connected' : \r\n                   apiStatus === 'error' ? 'API Error' : \r\n                   'Checking...'}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Analysis Stats */}\r\n              {isSessionActive && (\r\n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                  <Activity className=\"w-4 h-4 text-blue-500\" />\r\n                  <span>{analysisCount} analyses</span>\r\n                  {lastAnalysisTime && (\r\n                    <span className=\"text-gray-400\">({lastAnalysisTime}ms)</span>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Session Timer */}\r\n              <div className=\"text-right\">\r\n                <div className=\"text-sm text-gray-500\">Session Time</div>\r\n                <div className=\"text-2xl font-mono font-bold text-gray-800\">{formatTime(sessionTime)}</div>\r\n              </div>\r\n\r\n              {/* Start/Stop Button */}\r\n              {!isSessionActive ? (\r\n                <button\r\n                  onClick={startSession}\r\n                  disabled={apiStatus === 'error'}\r\n                  className=\"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors\"\r\n                >\r\n                  <Activity size={20} />\r\n                  Start Session\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  onClick={stopSession}\r\n                  className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors\"\r\n                >\r\n                  <AlertCircle size={20} />\r\n                  End Session\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto space-y-6\">\r\n        {/* Live Status Indicators */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {/* Video Feed */}\r\n          <div className=\"bg-gray-900 rounded-lg shadow-lg overflow-hidden relative\" style={{ paddingBottom: '56.25%', height: 0 }}>\r\n            <div className=\"absolute inset-0\">\r\n              {webcamActive ? (\r\n                <>\r\n                  <video \r\n                    ref={videoRef}\r\n                    autoPlay\r\n                    playsInline\r\n                    muted\r\n                    className=\"w-full h-full object-cover\"\r\n                    style={{ transform: 'scaleX(-1)' }}\r\n                  />\r\n                  \r\n                  {/* Face Detection Boxes */}\r\n                  {displayData?.faces?.map((face, idx) => {\r\n                    const videoWidth = videoRef.current?.videoWidth || 640;\r\n                    const videoHeight = videoRef.current?.videoHeight || 480;\r\n                    return (\r\n                      <div\r\n                        key={idx}\r\n                        className=\"absolute border-4 rounded transition-all duration-300\"\r\n                        style={{\r\n                          left: `${100 - ((face.x + face.width) / videoWidth) * 100}%`,\r\n                          top: `${(face.y / videoHeight) * 100}%`,\r\n                          width: `${(face.width / videoWidth) * 100}%`,\r\n                          height: `${(face.height / videoHeight) * 100}%`,\r\n                          borderColor: dominantColor,\r\n                          boxShadow: `0 0 20px ${dominantColor}`,\r\n                        }}\r\n                      />\r\n                    );\r\n                  })}\r\n                  \r\n                  {/* Live Indicator */}\r\n                  <div className=\"absolute top-4 right-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-500 z-10\">\r\n                    <div className=\"w-3 h-3 rounded-full bg-white animate-pulse\"></div>\r\n                    <span className=\"text-white text-sm font-semibold\">LIVE</span>\r\n                  </div>\r\n\r\n                  {/* Analyzing Indicator */}\r\n                  {isAnalyzing && (\r\n                    <div className=\"absolute top-16 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-xs z-10 animate-pulse flex items-center gap-2\">\r\n                      <div className=\"w-2 h-2 bg-white rounded-full animate-ping\"></div>\r\n                      Analyzing...\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <div className=\"w-full h-full flex items-center justify-center p-6\">\r\n                  <div className=\"text-center\">\r\n                    {webcamError ? (\r\n                      <>\r\n                        <VideoOff className=\"mx-auto mb-4 text-red-400\" size={48} />\r\n                        <p className=\"text-red-400 mb-2\">Camera Access Error</p>\r\n                        <p className=\"text-gray-500 text-sm\">{webcamError}</p>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Camera className=\"mx-auto mb-4 text-gray-500\" size={48} />\r\n                        <p className=\"text-gray-400\">Start session to begin detection</p>\r\n                        <div className=\"mt-4 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-700\">\r\n                          <div className=\"w-3 h-3 rounded-full bg-gray-500\"></div>\r\n                          <span className=\"text-white text-sm\">Offline</span>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Current Emotion & Sentiment */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <Brain className=\"text-indigo-600\" size={24} />\r\n                <h2 className=\"text-xl font-bold text-gray-800\">Current Emotion</h2>\r\n              </div>\r\n              <div className=\"text-center py-6\">\r\n                {displayData ? (\r\n                  <>\r\n                    <div \r\n                      className=\"text-6xl font-bold mb-2 capitalize\" \r\n                      style={{ color: dominantColor }}\r\n                    >\r\n                      {displayData.dominant_emotion}\r\n                    </div>\r\n                    <div className=\"text-gray-500 flex items-center justify-center gap-2\">\r\n                      <Camera className=\"w-4 h-4\" />\r\n                      {displayData.face_count} face(s) detected\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"text-6xl font-bold mb-2 text-gray-300\">Neutral</div>\r\n                    <div className=\"text-gray-400\">Waiting for detection...</div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Emotion Scores */}\r\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <BarChart3 className=\"text-purple-600\" size={24} />\r\n                <h2 className=\"text-xl font-bold text-gray-800\">Emotion Scores</h2>\r\n              </div>\r\n              \r\n              {displayData?.emotions ? (\r\n                <div className=\"space-y-3\">\r\n                  {Object.entries(displayData.emotions)\r\n                    .sort(([, a], [, b]) => b - a)\r\n                    .map(([emotion, score]) => (\r\n                      <div key={emotion}>\r\n                        <div className=\"flex justify-between text-sm mb-1\">\r\n                          <span className=\"capitalize font-medium\">{emotion}</span>\r\n                          <span className=\"font-semibold\">{score.toFixed(1)}%</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                          <div\r\n                            className=\"h-2 rounded-full transition-all duration-500\"\r\n                            style={{\r\n                              width: `${score}%`,\r\n                              backgroundColor: emotionColors[emotion] || '#9CA3AF'\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center text-gray-400 py-8\">\r\n                  <div className=\"w-12 h-12 mx-auto mb-2 border-4 border-gray-300 border-t-gray-500 rounded-full animate-spin\"></div>\r\n                  <p className=\"text-sm\">Start session to see scores</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Metrics Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          <MetricCard \r\n            title=\"Confidence Level\" \r\n            value={metrics.confidence} \r\n            icon={TrendingUp} \r\n            color=\"#10b981\" \r\n          />\r\n          <MetricCard \r\n            title=\"Attentiveness\" \r\n            value={metrics.attentiveness} \r\n            icon={CheckCircle} \r\n            color=\"#3b82f6\" \r\n          />\r\n          <MetricCard \r\n            title=\"Nervousness\" \r\n            value={metrics.nervousness} \r\n            icon={AlertCircle} \r\n            color=\"#ef4444\" \r\n          />\r\n        </div>\r\n\r\n        {/* Charts Section */}\r\n        {emotionHistory.length > 0 && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* Emotion Trend Chart */}\r\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                <BarChart3 size={24} className=\"text-indigo-600\" />\r\n                Emotional Trends\r\n              </h2>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart data={emotionHistory}>\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"time\" label={{ value: 'Time (s)', position: 'insideBottom', offset: -5 }} />\r\n                  <YAxis label={{ value: 'Score', angle: -90, position: 'insideLeft' }} />\r\n                  <Tooltip />\r\n                  <Legend />\r\n                  <Line type=\"monotone\" dataKey=\"confidence\" stroke=\"#10b981\" strokeWidth={2} name=\"Confidence\" />\r\n                  <Line type=\"monotone\" dataKey=\"attentiveness\" stroke=\"#3b82f6\" strokeWidth={2} name=\"Attentiveness\" />\r\n                  <Line type=\"monotone\" dataKey=\"nervousness\" stroke=\"#ef4444\" strokeWidth={2} name=\"Nervousness\" />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n\r\n            {/* Emotion Distribution */}\r\n            <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Emotion Distribution</h2>\r\n              <ResponsiveContainer width=\"100%\" height={300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={emotionDistribution}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={false}\r\n                    label={({ name, percent }) => percent > 0 ? `${name} ${(percent * 100).toFixed(0)}%` : ''}\r\n                    outerRadius={100}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                  >\r\n                    {emotionDistribution.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={entry.color} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Session Summary */}\r\n        {!isSessionActive && emotionHistory.length > 0 && (\r\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n            <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Session Summary</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div className=\"p-4 bg-green-50 rounded-lg\">\r\n                <div className=\"text-sm text-gray-600 mb-1\">Average Confidence</div>\r\n                <div className=\"text-2xl font-bold text-green-600\">\r\n                  {emotionHistory.length > 0 \r\n                    ? Math.round(emotionHistory.reduce((sum, item) => sum + item.confidence, 0) / emotionHistory.length)\r\n                    : 0}%\r\n                </div>\r\n              </div>\r\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\r\n                <div className=\"text-sm text-gray-600 mb-1\">Average Attentiveness</div>\r\n                <div className=\"text-2xl font-bold text-blue-600\">\r\n                  {emotionHistory.length > 0 \r\n                    ? Math.round(emotionHistory.reduce((sum, item) => sum + item.attentiveness, 0) / emotionHistory.length)\r\n                    : 0}%\r\n                </div>\r\n              </div>\r\n              <div className=\"p-4 bg-red-50 rounded-lg\">\r\n                <div className=\"text-sm text-gray-600 mb-1\">Average Nervousness</div>\r\n                <div className=\"text-2xl font-bold text-red-600\">\r\n                  {emotionHistory.length > 0 \r\n                    ? Math.round(emotionHistory.reduce((sum, item) => sum + item.nervousness, 0) / emotionHistory.length)\r\n                    : 0}%\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Hidden canvas for image capture */}\r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}